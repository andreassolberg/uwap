<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Authorization Required - UWAP</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="UNINETT WebApp Park" />
		<meta name="author" content="Andreas Ã…kre Solberg" />

		<style type="text/css">

		</style>

		<script type="text/javascript" src="/_/js/require.js"></script>
		<script type="text/javascript" src="//static.{{HOST}}/oauthgrant/main.js"></script>
		
	</head>




	<body>


		<div class="container" style="margin-top: 4em;" >
			<div class="row">


				<div class="col-md-6" style=" border-right: 3px solid #eee">

					<p><strong>{{client.name}}</strong> requests the following permissions:</p>



					{{#perm.userinfo}}


						<div class="panel panel-default">
							<div class="panel-heading">
								<span style="font-size: 150%" class="glyphicon glyphicon-user"></span> Access to information about you
							</div>

							<div class="panel-body" style="">
								<div class="media">
									<a class="pull-left" href="#">
										<img style="width: 64px; height: 64px; border: 1px solid #aaa; border-radius: 3px" 
											src="//api.{{HOST}}/media/user/{{user.a}}">
									</a>
									<div class="media-body">
										<h4 class="media-heading">
											<!-- <span class="glyphicon glyphicon-user"></span> -->
											{{user.name}}
										</h4>

										<p style="margin:0px">
											<span style="" class="glyphicon glyphicon-user"></span> 
												{{user.userid}}
											<span style="margin-left: .8em" class="glyphicon glyphicon-envelope"></span> 
												{{# user.mail }}
													{{.}}
												{{/ user.mail}}
												{{^ user.mail }}
													No mail
												{{/ user.mail}}
										</p>




										{{# user.groups }}

											<p style="margin:0px">Member of these groups - <a data-toggle="collapse" data-target="#grouplist" href="#">view list of groups</a></p>

											<ul id="grouplist" class="collapse" style="margin: 0px">
											
												<li>{{.}}</li>
											
											</ul>

										{{/ user.groups}}



									</div><!-- media-body -->
								</div><!-- media -->
							</div><!-- panel body -->
						</div><!-- panel -->


					{{/perm.userinfo}}



					{{#perm.feed}}

					<div class="panel panel-default">
						<div class="panel-body" style="">
							<p>
								<span style="font-size: 150%" class="glyphicon glyphicon-align-justify"></span> 


									{{#both}}
										Access to both <span class="label label-success">read</span> and <span class="label label-danger">write</span> to your eduFeed.
									{{/both}}
									{{#read}}
										Access to <span class="label label-success">read</span> your eduFeed.
									{{/read}}
									{{#write}}
										Access to <span class="label label-danger">write</span> your eduFeed.
									{{/write}}

					
							</p>
						</div>
					</div>

					{{/perm.feed}}








<!--
<?php
/*
 * Dealing with API Gatekeeper access
 */


foreach($scopes AS $k => $v) {
	if (preg_match('/^rest_([^_]+($|_))/', $k, $matches)) {
		$apiid = $matches[1];

?>
		<div class="panel panel-default">
			<div class="panel-heading">Long term access</div> 
			<div class="panel-body" style="">

				<p>
					<span style="font-size: 150%" class="glyphicon glyphicon-record"></span> 
					<b>API Accesss to <tt><?php echo $apiid; ?></tt></b>. The client may access this API on behalf of you.</p>

			</div>
		</div>


<?php

	}
}
?>


-->


			{{#perm.longterm}}

				<div class="panel panel-default">
					<!-- <div class="panel-heading">Long term access</div> -->
					<div class="panel-body" style="">

						<p>
							<span style="font-size: 150%" class="glyphicon glyphicon-time"></span> 
							<b>Long term access</b>. The client may access your data until you explicitly revoke the access.</p>

					</div>
				</div>

			{{/perm.longterm}}




			{{#perm.longterm}}

				<div class="panel panel-default">
					<!-- <div class="panel-heading">Long term access</div> -->
					<div class="panel-body" style="">

						<p>
							<span style="font-size: 150%" class="glyphicon glyphicon-time"></span> 
							<b>Long term access</b>. The client may access your data until you explicitly revoke the access.</p>

					</div>
				</div>

			{{/perm.longterm}}



			{{#perm.unknown}}

				<div class="panel panel-default">
					<!-- <div class="panel-heading">Long term access</div> -->
					<div class="panel-body" style="">

						<p>
							<span style="font-size: 150%" class="glyphicon glyphicon-time"></span> 
							<b>There is a number of unknown permissions that you are requested to accept:</p>
							<ul>
							{{#items}}
								<li>{{.}}</li>
							{{/items}}
							</ul>
					</div>
				</div>


			{{/perm.unknown}}







				<div>

					<form id="login" method="post" action="{{posturl}}">


						{{#postdata}}
							
							<input type="hidden" name="{{key}}" value="{{value}}" />
						{{/postdata}}

						<fieldset id="actions" style="text-align: right">
							
							<!-- <input tabindex="1" type="submit" id="submit" class="btn btn-lg btn-success" value="Allow"> -->
							
							<a id="submit" tabindex="1" href="#" class="btn btn-lg btn-success">
								<span class="glyphicon glyphicon-ok"></span>
								Allow
							</a>


							<a tabindex="2" class="btn btn-danger" href="#">
								<span class="glyphicon glyphicon-remove"></span>
								Reject</a>
						</fieldset>
					</form>
				
				</div>



				</div><!-- column -->





				<div class="col-md-1">

					<svg xmlns="http://www.w3.org/2000/svg" xmlns:xl="http://www.w3.org/1999/xlink" 
						style="margin-left: -28px; margin-top: 0px" height="165pt" width="70pt" 
						version="1.1" viewBox="154 100 70 165" 
						>
						<!-- <g fill="none" fill-opacity="1" stroke="none" stroke-dasharray="none" stroke-opacity="1"> -->
							<path d="M 163 109 L 215 182.5 L 163 256 Z" fill="#f58220"/>
						<!-- </g> -->
					</svg>

				</div>


				<div class="col-md-5">

					<div class="well">

						<div class="media" style="margin: 2em; 0px">
							<a class="pull-left" href="#">
								<img class="media-object" src="//api.{{HOST}}/media/logo/app/{{client.id}}" alt="...">
							</a>
							<div class="media-body">

								<h2 class="media-heading">{{client.name}}</h2>
								{{#client.descr}}
									<p>{{.}}</p>
								{{/client.descr}}
								<p><a target="_blank" href="#">Read more about this application</a></p>

							</div><!-- media body -->
						</div><!-- media -->



					</div><!-- well -->



					<div class="panel panel-default">
						<div class="panel-heading">Application owner</div>
					  
					  <div class="panel-body" style="">
					    
							<div class="media">
								<a class="pull-left" href="#">
									<img style="width: 64px; height: 64px; border: 1px solid #aaa; border-radius: 3px" 
										src="//api.{{HOST}}/media/user/{{owner.a}}">
								</a>
								<div class="media-body">
									<h4 class="media-heading">
										<!-- <span class="glyphicon glyphicon-user"></span> -->
										{{owner.name}}
									</h4>

									
									<p style="margin: 0px">
										<span class="glyphicon glyphicon-envelope"></span> 
										{{owner.mail}}</p>
									<p style="margin: 0px">
										
										<a href="mailto:{{owner.mail}}">Send e-mail</a></p>


								</div><!-- media body -->
							</div><!--  media -->

					  </div><!-- panel body -->
					</div><!-- panel -->




			</div><!-- row -->
		</div><!-- container -->





	</body>

</html>




