<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>UNINETT WebAPP Demo</title>

	<style>
		body {
			background: #ccc; color: #222; padding: 3em; font-family: sans-serif
		}
		div#out {
			border-radius: 10px;
			margin: 2em 0px; background: #eee; border: 1px solid #ccc; padding: 1em
		}
		dl dd {

		}
		div#chatoutput p {
			margin: 5px;
			border-top: 1px solid #ccc;
			padding: 4px;

		}
	</style>

	<!-- JQuery hosted by Google -->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
	<!-- Core API to UNINETT WebApp Park -->
	<script type="text/javascript" src="/_/js/oauth.js"></script>
	<script type="text/javascript" src="/_/js/core.js"></script>

	<script type="text/javascript" src="/js/geo.js"></script>
	<script type="text/javascript" src="/js/moment.js"></script>


	<script type="text/javascript">

		function testVoot() {
			$.oajax({
				url: UWAP.utils.getURL("core", "/api/groups/@me"),
				jso_provider: "uwapvoot",
				jso_scopes: ["voot"],
				jso_allowia: true,
				dataType: 'json',
				success: function(response) {
					console.log(response);
					$("div#out").append('<pre>' + JSON.stringify(response, null, 4) + '</pre>');
					
				}
			});
		}

		function weatherresult(response) {
			console.log("Weather response", response);
			$("div#out").append('<pre>' + JSON.stringify(response, null, 4) + '</pre>');
		}



		$("document").ready(function() {

			$("input#smt").on("click", function() {
				UWAP.auth.require(function(data) {
					$("div#out").append("<h2>You are logged in (required check) as - <i>" + data.name + "</i></h2>");
				});
			});

			UWAP.auth.checkPassive(function(data) {
				$("div#out").append("<h2>You are logged in (passive check) as - <i>" + data.name + "</i></h2>");

				// if (navigator.geolocation) {
				// navigator.geolocation.getCurrentPosition(function(position) {
				// 	UWAP.data.get('http://api.yr.no/weatherapi/oceanforecast/0.9/?lat=' + 
				// 		position.coords.latitude  + ';lon=' + position.coords.longitude  + '', 
				// 		{'xml': 1},
				// 		weatherresult);
				// });
				// }

				// UWAP.data.get("https://graph.facebook.com/me/home", {handler: "facebook"}, function(res) {
				// 	console.log("facebook response", res);
				// });


				// UWAP.store.save({"name": "Andreas", "number": Math.random()}, function() {
				// 	console.log("Object saved");
				// });
				// UWAP.store.queryOne({"name": "Andreas"}, function(data) {
				// 	console.log("queryOne()", data);
				// });
				// UWAP.store.queryList({"name": "Andreas"}, function(data) {
				// 	console.log("queryList()", data);
				// });


			}, function(response) {
				console.log("Not logged in");
				$("div#out").append('<pre>Not logged in: ' + JSON.stringify(response, null, 4) + '</pre>');
			});


		});

	</script>
	
	
	
</head>

<body style="">



	<input type="submit" id="smt" name="smt" value="Require login" />
	<!-- <input type="submit" id="facebook" name="facebook" value="Load facebook" /> -->



	<div id="out" style=""></div>


	

</body>
</html>








